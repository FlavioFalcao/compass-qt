Compass v1.0
============

Compass is a Forum Nokia example that teaches the use of traditional compass
and allows the user to have a bearing to the desired place using the Ovi maps.
The main purpose of the example is to demonstrate use of Maps and navigation
API.

See more information about the project at
https://projects.forum.nokia.com/compass.


FILES
-------------------------------------------------------------------------------

bin/*

- Contains the copiled binaries.

src/arc.h

- Implements custom QML element Arc that can draw arc. Arc is used in the
  calibration view to represent the calibration level.

src/declarativeview.h / cpp

- Derives QDeclarativeView to handle the multitouch events.

src/main.cpp

- Locks the orientation to portrait, creates the MainWindow object and sets the
  MainWindow object to full screen.

src/mainwindow.h / cpp

- Creates the declarative intepreter, compass sensor / filter, orientation
  sensor / filter and geo position info source. Connects sensor's signals to
  QML functions and finally shows the QML UI.
  
src/orientationfilter.h

- Multiderives QObject and QOrientationFilter to allow emitting of Qt sinals
  when orientation changes.
  
src/backup_registration.xml

- Describes the backup / restore logic how to backup the application in Symbian
  OS.
  
src/qml/BorderDialog.qml

- Implements dialog that has nice borders. Dialog also handles the orientation
  changes with animations.
  
src/qml/CalibrationView.qml

- Implements the calibration view, shows the compass scale and needle to show
  the calibration level, plays feedback effects, shows calibration completed
  dialog.

src/qml/Compass.qml

- Implements the compass with compass plate, scale plate and needle. Contains
  mouse areas to implement rotation of the compass and scale plate as well as
  the moving of the compass.
  
src/qml/InfoView.qml

- Uses BorderDialog.qml to show a info view.

src/qml/PannableMap.qml

- Implements the map that can be panned. Shows also the "you are here" circle
  on top of the map.
  
src/qml/setting.js

- Implements the logic to interact with SQLite DB to load / save the
  application settings.
  
src/qml/SettingsPane.qml

- Uses BorderDialog.qml to show a settings view. The ListModel is used to show
  the settings. The SQLite DB content is used as data model for the view.
  
src/qml/Ui.qml

- The main QML element in this application. Creates all other elements and
  coordinates the interaction between elements.


KNOWN ISSUES
-------------------------------------------------------------------------------

- The walked path can not be drawn on top of the map by using MapPolyLine
  element. Feature will be implemented when the QtMobility is mature enought
  to support it.

  
INSTALLATION INSTRUCTIONS
-------------------------------------------------------------------------------

Mobile device (Symbian^3)
~~~~~~~~~~~~~~~~~~~~~~~~~

There are two ways to install the application on the device.

0. The Qt libraries (4.7.2 or higher) must be installed. See the section 
   COMPATIBILITY for more information about the installation.

1. a) Drag the compass_v1_0_s^3.sis file to the Nokia Ovi Suite when the
      device is connected with the USB cable.
   
   OR
   
   b) Send the application directly to the Messaging Inbox (for example,
      through Bluetooth).

2. After the installation is complete, return to the Application menu and
   select the Applications folder.
   
3. Locate the Compass icon and select it to launch the application.


RUNNING THE APPLICATION
-------------------------------------------------------------------------------

The application consists two modes: Compass mode and Map mode.

In the Map mode you are able to view the map  with your current position
retrieved by GPS and shown with a red circle. The radius of the red circle will
change according to the GPS fix accuracy. The more accurate fix the more
smaller circle is shown giving you more precise location of you current
whereabout. The map can be panned by dragging the map with a finger. The zoom
level can be changed by pinching the map with two fingers.The GPS indicator on
the upper left corner will iterate when the phone is trying to retrieve the GPS
fix. The indicator is steady when the signal is received from the satellites.
Tapping the GPS indicator will pan the map to the current location.

To navigate to some position in a map do the following: First switch to the Map
mode, place the edge of the compass on the map so that it connects the current
location with the desired destination and turn the scale of the compass to the
map north. Now, enter to the Compass mode and turn with the phone as long as
the compass needle is positioned on top of the outlined orientating arrow. The
desired bearing is now at your front.

There exists couple of on / off type of settings that adjusts the behavior of
the application:

Auto north in map:
    Automatically turn the scale of the compass to the map north when compass
    is rotated in Map mode.

Bearing turnable in Compass mode:
    The turnability of the bearing can be prevented in the Compass mode. By
    setting the turnability off you can prevent accidential touches which would
    affect to the navigation in the field. Also by enabling the turnability the
    compass can be used with the real paper map.
    
Prevent screensaver:
    Prevents screensaver for occuring.

Satellite map:
    Toggles between map and satellite.

Use feedback in calibration:
    Sets if an audio feedback is used on the calibration process.



COMPATIBILITY
-------------------------------------------------------------------------------

- Symbian^3 with Qt version 4.7.2 or higher.

  1. Download Qt for Symbian (4.7.2 or higher) from qt.nokia.com.
  
  2. Drag qt_installer.sis on top of the device in Nokia Ovi Suite while the 
     device is connected. The SIS package is found in the installation folder 
     of Qt for Symbian (4.7.2 or higher).
     
     
Tested on:

- Nokia N8-00
- Nokia E7-00
- Nokia C7-00
- Nokia C6-01


Developed with:

-QtSDK 1.1beta


VERSION HISTORY
-------------------------------------------------------------------------------
1.0 Added better graphics. Possibility to disable haptic feedback on 
    calibration. Bug fixes.
0.1 First public version in Projects Forum Nokia.
