Compass v1.1
============

Compass is a Forum Nokia example application that teaches the use of a
traditional compass and allows the user to determine the bearing to the desired
location using Ovi maps. The main purpose of the example application is to
demonstrate the use of the Maps and Navigation API.

For more information about the project, see:
https://projects.developer.nokia.com/compass


FILES
-------------------------------------------------------------------------------

bin/*

- Contains the compiled binaries.

src/arc.h

- Implements a custom QML element, Arc, that can draw an arc. Arc is used in
  the calibration view to represent the calibration level.

src/declarativeview.h / cpp

- Derives QDeclarativeView to handle multitouch events.

src/main.cpp

- Locks the orientation to portrait, creates the MainWindow object, and sets
  the MainWindow object to full screen.

src/mainwindow.h / cpp

- Creates the declarative intepreter, compass sensor / filter, orientation
  sensor / filter, and geo position information source. Connects the sensor's
  signals to QML functions and shows the QML UI.
  
src/orientationfilter.h

- Multiderives QObject and QOrientationFilter to allow emitting of Qt sinals
  when the orientation changes.
  
src/backup_registration.xml

- Describes the backup / restore logic on how to backup the application in
  Symbian OS.
  
src/qml/BorderDialog.qml

- Implements a dialog that has nice borders. The dialog also handles the
  orientation changes with animations.
  
src/qml/CalibrationView.qml

- Implements the calibration view, shows the compass scale and needle to
  indicate the calibration level, plays feedback effects, and shows the
  calibration completed dialog.

src/qml/Compass.qml

- Implements the compass with a compass plate, scale plate, and needle.
  Contains mouse areas to implement the rotation of the compass and the scale
  plate as well as moving the compass.
  
src/qml/InfoView.qml

- Uses BorderDialog.qml to show the information view.

src/qml/PannableMap.qml

- Implements the map that can be panned. Also shows the "you are here" circle
  on the map.
  
src/qml/setting.js

- Implements the logic to interact with SQLite DB to load / save the
  application settings.
  
src/qml/SettingsPane.qml

- Uses BorderDialog.qml to show the settings view. The ListModel is used to
  show the settings. The SQLite DB content is used as a data model for the
  view.
  
src/qml/Ui.qml

- The main QML element in this application. Creates all other elements and
  coordinates the interaction between elements.


KNOWN ISSUES
-------------------------------------------------------------------------------

- The walked route cannot be drawn on top of the map by using the MapPolyLine
  element. This feature will be implemented when Qt Mobility is mature enough 
  to support it.
  
  
INSTALLATION INSTRUCTIONS
-------------------------------------------------------------------------------

Mobile device (Symbian^1 and Symbian^3)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

0. The Qt libraries (4.7.3 or higher) must be installed. See COMPATIBILITY for
   more information about the installation.

1. Drag the appropriate SIS file to the Nokia Ovi Suite while the device is
   connected with the USB cable.

2. After the installation is complete, return to the application menu and
   select the Applications folder.
   
3. Locate the Compass icon and select it to launch the application.


Mobile device (MeeGo 1.2 Harmattan)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

1. Copy the compass_v1_1_harmattan.deb file into a specific folder on the
   device.

2. Start Terminal. Type 'ssh root@localhost' to get root access. The password
   is 'rootme'.

3. 'cd' to the directory to which you copied the package.

4. As root, install the package:
   dpkg -i compass_v1_1_harmattan.deb

5. Locate the Compass icon in the Applications view and tap it to launch
   the application.


RUNNING THE APPLICATION
-------------------------------------------------------------------------------

The application has two modes: Compass mode and Map mode.

In Map mode you can view the map with your current position retrieved by GPS 
and indicated with a red circle. The radius of the red circle changes 
according to the GPS fix accuracy. The more accurate the fix, the smaller the 
circle, indicating your current location more precisely. The map can be panned 
by dragging it with a finger. The zoom level can be changed by pinching the 
map with two fingers. The GPS indicator in the upper left corner will iterate 
when the phone is trying to retrieve the GPS fix. The indicator is steady when 
the signal is received from the satellites. Tapping the GPS indicator will pan 
the map to the current location.

To navigate to a certain position in a map:

1. Switch to Map mode, place the edge of the compass on the map so that it
   connects the current location with the desired destination, and turn the
   scale of the compass to the grid north.

2. Switch back to Compass mode and turn around with the phone until the 
   compass needle is positioned on top of the outlined orientating arrow. The
   desired bearing is now in front of you.

   
The following on / off settings adjust the behavior of the application:

Auto north in the map:
    Automatically turn the scale of the compass to the grid north when the
    compass is rotated in Map mode.

Bearing turnable in the Compass mode:
    The turnability of the bearing can be prevented in Compass mode. By
    setting the turnability off you can prevent accidential touch events which
    would affect the navigation in the field. When turnability is enabled, the 
    compass application can be used with a real paper map.
    
Prevent screensaver:
    Prevents the screensaver from getting activated.

Satellite map:
    Toggles between the map and the satellite.

Use sound in calibration:
    Defines whether audio feedback is used during the calibration process.


COMPATIBILITY
-------------------------------------------------------------------------------

- Symbian^1 and Symbian^3 with Qt version 4.7.3 or higher.

  1. Download Qt for Symbian (4.7.3 or higher) from qt.nokia.com.
  
  2. Drag qt_installer.sis on top of the device in Nokia Ovi Suite while the 
     device is connected. The SIS package is found in the installation folder 
     of Qt for Symbian (4.7.3 or higher).
     
- MeeGo 1.2 Harmattan

     
Tested on:

- Nokia 5800 XpressMusic
- Nokia C6-01
- Nokia C7-00
- Nokia E7-00
- Nokia N8-00
- Nokia X7-00
- Nokia N950


Developed with:

- Qt SDK 1.1


VERSION HISTORY
-------------------------------------------------------------------------------
1.1 Added support for Symbian^1 and MeeGo 1.2 Harmattan.
1.0 Compass data via Qt QCompass.
0.9 Added better graphics. Possibility to disable audio feedback on 
    calibration. Bug fixes. Work-around for QCompass crash by Symbian code.
0.1 First public version in Projects Forum Nokia.